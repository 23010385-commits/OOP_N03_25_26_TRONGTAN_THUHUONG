<!DOCTYPE html>
<html lang="vi">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Chỉnh sửa Khóa học</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
	<style>body{font-family: 'Roboto', sans-serif}</style>
</head>
<body class="min-h-screen flex flex-col bg-gray-50">

	<div th:replace="fragments/navbar :: navbar"></div>

	<main class="max-w-3xl mx-auto p-6 flex-1">
		<div class="mb-6 flex items-center justify-between">
			<h1 class="text-2xl font-bold">Chỉnh sửa khóa học</h1>
			<a th:href="@{/khoahoc}" class="text-sm text-gray-600">Quay lại</a>
		</div>

		<div class="bg-white p-6 rounded-lg shadow">
			<form th:action="@{/khoahoc/update/{id}(id=${khoaHoc.id})}" th:object="${khoaHoc}" method="post" onsubmit="return validate(this)">
				<input type="hidden" th:field="*{id}">
				<div class="grid grid-cols-1 gap-4">
					<div>
						<label class="block text-sm font-medium text-gray-700">Tên khóa học</label>
						<input type="text" th:field="*{tenKhoaHoc}" required class="mt-1 block w-full border border-gray-300 rounded px-3 py-2" />
					</div>
					<div>
						<label class="block text-sm font-medium text-gray-700">Mô tả</label>
						<textarea th:field="*{moTa}" rows="4" class="mt-1 block w-full border border-gray-300 rounded px-3 py-2"></textarea>
					</div>

					<div>
						<label class="block text-sm font-medium text-gray-700">Giảng viên phụ trách</label>
						<select name="giaoVienId" class="mt-1 block w-full border border-gray-300 rounded px-3 py-2">
							<option value="" th:selected="${khoaHoc.giaoVien == null}">-- Chọn giảng viên --</option>
							<option th:each="gv : ${giaoVienList}" th:value="${gv.id}" th:text="${gv.ten}" th:selected="${khoaHoc.giaoVien != null and gv.id == khoaHoc.giaoVien.id}"></option>
						</select>
					</div>
				</div>

				<div class="mt-6 flex gap-3">
					<button type="submit" class="px-4 py-2 bg-green-600 text-white rounded">Lưu thay đổi</button>
					<a th:href="@{/khoahoc}" class="px-4 py-2 bg-gray-200 rounded">Hủy</a>
				</div>
			</form>
		</div>
	</main>

	<div th:replace="fragments/footer :: footer"></div>

	<script>
		function validate(form){
			const name = form.querySelector('[name="tenKhoaHoc"]');
			if(name && name.value.trim().length < 2){ alert('Tên khóa học quá ngắn'); name.focus(); return false; }
			return true;
		}
	</script>
</body>
</html>

